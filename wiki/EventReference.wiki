#summary omicron Event structure
#sidebar Sidebar

<p>*Last revision:* ver. 1.2 - 28 June 2012</p>

= The omicron Event structure =
This document explains the structure of events generated by omicron event services. The design rationale behind the event structure was to make it:
 * Generic enough to support a reasonable amount of physical and logical input devices.
 * Intuitive to use and interpret
 * Easy to pack and stream remotely

inside omicron, event data is stored in the [http://omegalib.googlecode.com/svn/refdocs/trunk/html/structomicron_connector_1_1_event_data.html omicronConnector::EventData structure] and in the [http://omegalib.googlecode.com/svn/refdocs/trunk/html/classomicron_1_1_event.html omicron::Event] class. Both types contain the same data and are organized similarly, but `omicron::Event` offers a few additional methods to interact with the data. if you are developing an omicronConnector application though, only the `omicronConnector::EventData` stucture is available to you.

In this guide we explain the meaning of fields inside the event types: this information should be helpful regardless of your choice of using `Event` or `EventData`.

== Event Data Fields ==
The following fields make up an event:
 * `timestamp (unsigned int)`: this is the event timestamp in milliseconds using the standard unix time [http://linux.die.net/man/3/ftime see ftime]
 * `serviceType (enum)`: this is a value from the [http://omegalib.googlecode.com/svn/refdocs/trunk/html/classomicron_1_1_event_base.html#ab1f3e0a5d901729bf93e3b5ff37a54be omicron::EventBase::ServiceType] enumeration. It is used to classify event services into a few general categories. The categories will be explained later on this page
 * `serviceId (int)`: a unique identifier of the service generating the event.
 * `sourceId`: the identifier of the source generating the event within the service. Some services generate events from a single source (i.e. a mouse service generating events for a single mouse). Other services support streams from multiple sources (like a tracking system tracking multiple rigid bodies, or a gamepad service generating events for two connected controllers). The specific semantics of the event sourceId depend on the service.
 * `type`: this is a value from the [http://omegalib.googlecode.com/svn/refdocs/trunk/html/classomicron_1_1_event_base.html#af95879546c1e3486d8b26c24e787dc53 omicron::EventBase::Type] enumeration, and it gives general information about the category of the event. For instance, a mouse may be generating `Up` and `Down` events for button changes, and `Move` events for changes in position. A tracking system will probably generate `Update` events and `Trace`, `Untrace` when a rigid body tracking is aquired and lost. Ui controls may generate `ChangeValue` events. As for sourceId, the specific meaning of a type depends on the service. It is up to the service developer to give the generated events a meaningful and intuitive type. The service type is usually an indication of the types of events the service will generate.
 * `flags`: this is a bitfield with bits set using the [http://omegalib.googlecode.com/svn/refdocs/trunk/html/classomicron_1_1_event_base.html#a39f525558912d1fd57b9d0a58a5e4977 omicron::EventBase::Flags] enumeration. Flags can be used to transmit the state of digital buttons on controllers, or to communicate specific states of the event (i.e. the `Processed` flag indicated that the event has been handled already by some other portion of a program).
 * `posx, posy, posz (float)`: the 3d position of the event (for events that need it)
 * `orx, ory, orz, orw (float)`: the 3d orientation of the event as a quaternion (for events that need it)
 * `extraData`: a byte array of fixed size, containing additional data associated with the event. Refer to the service generating the event for information about contents of this event section. ExtraData is at most 1kb as of version 1.2 of omicron.
 * `extraDataType`: this is a value from the [http://omegalib.googlecode.com/svn/refdocs/trunk/html/classomicron_1_1_event_base.html#a91f2e2308ea1cec00fe036789a040bb9 omicron::EventBase::ExtraDataType] enumeration. It indicates the format of the extra data section. The extra data can be formatted as:
  * A text string as a null-terminated `char*` array
  * An array of floating point numbers
  * An array of integer numbers
  * An array of float triplets representing 3d vectors
 * `extraDataItems`: the number of 'items' stored in the extra data array. *NOTE* this is not the size in bytes of the data in the extra data array. For instance, if the extra data is storing two floating point values, `extraDataItems = 2`, the actual data size is `2 * sizeof(float) = 8 bytes`.
 * `extraDataMask (unsigned int)`: a generic 32bit field used to specify flags about extra data items. For instance, it can be used to mark valid/invalid entries in the extra data array, but it's specific meaning is up to the service developers.
 
== Service Types ==
This section illustrates the general characteristics of event services, depending on their type. The service type is usually attached to the `serviceType` field of events generated by a service.

=== Pointer Services ===
Pointer services generate events coming from mice, multitouch surfaces and comparable devices. Events generated by pointer services usually store a 2d position, possibly some button state flags

=== Mocap Services ===
=== Keyboard Services ===
=== Controller Services ===
=== Ui Services ===
=== Generic Services ===
=== Brain Services ===
=== Wand Services ===
